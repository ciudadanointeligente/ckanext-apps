<form id="source-new" class="ckan" method="post"
  py:attrs="{'class':'has-errors'} if errors else {}"
  xmlns:i18n="http://genshi.edgewall.org/i18n"
  xmlns:py="http://genshi.edgewall.org/"
  xmlns:xi="http://www.w3.org/2001/XInclude">

  <div class="error-explanation" py:if="error_summary">
    <h2>Errors in form</h2>
    <p>The form contains invalid entries:</p>
    <ul>
      <li py:for="key, error in error_summary.items()">${"%s: %s" % (key, error)}</li>
    </ul>
  </div>

  <fieldset>
    <legend>Details</legend>
      <dl>
        <dt><label class="field_req" for="title">Title *</label></dt>
        <dd><input id="title" name="title" size="80" type="text" value="${data.get('title', '')}" /></dd>
        <dd class="field_error" py:if="errors.get('title', '')">${errors.get('title', '')}</dd>
        <dd class="instructions basic">A short title for this idea.</dd>

        <dt><label class="field_req" for="submitter">Submitter *</label></dt>
        <dd><input id="submitter" name="submitter" size="80" type="text" value="${data.get('submitter', '')}" /></dd>
        <dd class="field_error" py:if="errors.get('submitter', '')">${errors.get('submitter', '')}</dd>
        <dd class="instructions basic">Group or person that came up with the idea.</dd>
        
        <dt><label class="field_req" for="submitter_url">Home page</label></dt>
        <dd><input id="submitter_url" name="submitter_url" size="80" type="text" value="${data.get('submitter_url', '')}" /></dd>
        <dd class="field_error" py:if="errors.get('submitter_url', '')">${errors.get('submitter_url', '')}</dd>
        <dd class="instructions basic">Home page of the submitter.</dd>
        
        <dt><label class="field_opt" for="description">Description *</label></dt>
        <dd><textarea id="description" name="description" cols="30" rows="5" style="height:75px">${data.get('description', '')}</textarea></dd>
        <dd class="instructions basic">Provide a short description of the idea.</dd>
        
        <dt><label class="field_req" for="tags">Tags</label></dt>
        <dd><input id="tags" name="tags" size="80" type="text" value="${' '.join(data.get('tags', []))}" /></dd>
        <dd class="field_error" py:if="errors.get('tags', '')">${errors.get('tags_', '')}</dd>
        <dd class="instructions basic">Space-separated keyword describing the idea.</dd>

        <dt><label class="field_req" for="featured">Featured</label></dt>
        <dd>
          <input py:if="data.get('featured')" id="featured" name="featured" size="80" type="checkbox" checked="checked" />
          <input py:if="not data.get('featured')" id="featured" name="featured" size="80" type="checkbox" />
        </dd>
        <dd class="field_error" py:if="errors.get('featured', '')">${errors.get('featured', '')}</dd>
        <dd class="instructions basic">Is this idea to be featured on the home page.</dd>
      </dl>
  </fieldset>
  <input id="save" name="save" value="Save" type="submit" /> or <a href="/ideas">Return to the ideas list</a>
</form>

